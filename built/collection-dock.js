//     collection-dock
//     (c) simonfan
//     collection-dock is licensed under the MIT terms.

define("__collection-dock/attach",["require","exports","module","lodash"],function(e,i){e("lodash");i.resortEvent="resort",i.attach=function(e){this.detach(),this.collection=e,e.on("add",this.handleAdd).on("remove",this.handleRemove).on("reset",this.handleReset).on(this.resortEvent,this.handleResort),this.handleReset(e)},i.detach=function(){this.collection&&this.collection.off("add",void 0,this).off("remove",void 0,this).off("reset",void 0,this).off(this.resortEvent,void 0,this),this.$container.html("")}}),define("__collection-dock/iterators",["require","exports","module","lodash"],function(e,i){function t(e,i){return o[e].apply(o,i)}var o=e("lodash");i.onViews=function(){var e=Array.prototype.slice.call(arguments);return o.each(this.itemViews,function(i){i.on.apply(i,e)}),this};var n=["each","rest","first"];o.each(n,function(e){i[e]=function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this.itemViews),t(e,i)}})}),define("__collection-dock/event-handlers",["require","exports","module","lodash","jquery"],function(e,i){e("lodash"),e("jquery");i.handleAdd=function(e){this.buildItemView(e)},i.handleRemove=function(e){var i=this.getView(e.cid);i&&i.remove()},i.handleReset=function(){this.$container.html(""),this.collection.each(this.handleRemove),this.collection.each(this.handleAdd)},i.handleResort=function(e){this.handleReset(e,this.$container)}}),define("__collection-dock/item/view",["require","exports","module","jquery","lowercase-backbone"],function(e,i,t){var o=e("jquery"),n=e("lowercase-backbone");t.exports=n.view.extend({initialize:function(){n.view.prototype.initialize.apply(this,arguments),this.initializeItemView.apply(this,arguments),this.render()},initializeItemView:function(e){this.collectionView=e.collectionView},html:"<div></div>",render:function(){var e=this.collectionView.collection.indexOf(this.model);this.$el=o(this.html);var i=this.collectionView.getViewAt(e-1);i?this.$el.insertAfter(i.$el):this.$el.appendTo(this.collectionView.$container)},remove:function(){this.collectionView.eraseView(this.model.cid),n.view.prototype.remove.apply(this,arguments)}})}),define("__collection-dock/item/methods",["require","exports","module","lodash","./view"],function(e,i){var t=e("lodash");i.buildItemView=function(e){var i=this.itemView({model:e,collectionView:this}),t=this.collection.indexOf(i.model);return this.itemViews.splice(t,0,i),i},i.itemView=e("./view"),i.getViewAt=function(e){return this.itemViews[e]},i.eraseViewAt=function(e){return this.itemViews.splice(e,1),this},i.getView=function(e){return t.find(this.itemViews,function(i){return i.model.cid===e})},i.eraseView=function(e){var i=t.findIndex(this.itemViews,function(i){return i.model.cid===e});return this.eraseViewAt(i)}}),define("collection-dock",["require","exports","module","lodash","lowercase-backbone","./__collection-dock/attach","./__collection-dock/iterators","./__collection-dock/event-handlers","./__collection-dock/item/methods"],function(e,i,t){var o=e("lodash"),n=e("lowercase-backbone"),l=t.exports=n.view.extend({initialize:function(){n.view.prototype.initialize.apply(this,arguments),this.initializeCollectionDock.apply(this,arguments)},initializeCollectionDock:function(e){if(this.collection=e.collection||this.collection,!this.$el)throw new Error('No "$el" property found on dock.');var i=this.$container;this.$container=i?o.isString(i)?this.$el.find(i):i:this.$el,o.bindAll(this,"handleAdd","handleRemove","handleReset","handleResort"),this.itemViews=[]}});l.proto(e("./__collection-dock/attach")),l.proto(e("./__collection-dock/iterators")),l.proto(e("./__collection-dock/event-handlers")),l.proto(e("./__collection-dock/item/methods"))});