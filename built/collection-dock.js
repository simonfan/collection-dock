//     jquery.filler
//     (c) simonfan
//     jquery.filler is licensed under the MIT terms.

//     model-dock
//     (c) simonfan
//     model-dock is licensed under the MIT terms.

//     collection-dock
//     (c) simonfan
//     collection-dock is licensed under the MIT terms.

define("__collection-dock/attach/initialize",["require","exports","module","lodash"],function(e,t,o){var i=e("lodash");o.exports=function(){i.bindAll(this,"handleAdd","handleRemove","handleReset","handleResort"),this.itemViews={}}}),define("__jquery.filler/helpers",["require","exports","module","lodash"],function(e,t){var o=e("lodash");t.splitter=function(e){return new RegExp("\\s*"+e+"\\s*")},t.splitInto=function(e,i,n){i=t.splitter(i),n=n.split(i);var r=e.split(i);return o.zipObject(n,r)}}),define("__jquery.filler/method",["require","exports","module","jquery","lodash","./helpers"],function(e,t,o){var i=(e("jquery"),e("lodash"),e("./helpers"));o.exports=function(e,t){var o=i.splitInto(t,":","method:argumentsString"),n=o.method,r=o.argumentsString?o.argumentsString.split(":"):[];return function(t){return r.push(t),e[n].apply(e,r)}}}),define("__jquery.filler/html",["require","exports","module","jquery","lodash"],function(e,t,o){var i=(e("jquery"),e("lodash")),n={"default":function(e,t){return e.html(t)},INPUT:function(e,t){var o=e.prop("type");return("checkbox"===o||"radio"===o)&&(t=i.isArray(t)?t:[t]),e.val(t)},SELECT:function(e,t){return e.val(t)},IMG:function(e,t){return e.prop("src",t).trigger("change",t)},TEXTAREA:function(e,t){return e.val(t)}};o.exports=function(e){var t=e.prop("tagName"),o=n[t]||n["default"];return function(t){return o(e,t)}}}),define("__jquery.filler/single",["require","exports","module","jquery","lodash","./helpers","./method","./html"],function(e,t,o){var i=e("jquery"),n=e("lodash"),r=e("./helpers"),a=e("./method"),l=e("./html");o.exports=function d(e,t){if(1===arguments.length&&n.isString(e)&&(t=e,e=i(window)),n.isArray(t)){var o=n.map(t,n.partial(d,e));return function(e){n.each(o,function(t){t(e)})}}t=r.splitInto(t,"->","element->method");var s=t.element?e.find(t.element):e;return t.method?a(s,t.method):l(s)}}),define("__jquery.filler/map-fillers",["require","exports","module","jquery","lodash","./single"],function(e,t,o){var i=(e("jquery"),e("lodash")),n=e("./single");o.exports=function(e,t){var o={};return i.each(t,function(t,i){o[i]=n(e,t)}),o}}),define("jquery.filler",["require","exports","module","jquery","lodash","./__jquery.filler/map-fillers"],function(e,t,o){var i=e("jquery"),n=e("lodash"),r=e("./__jquery.filler/map-fillers"),a=o.exports=function(e,t,o){1===arguments.length&&(t=e,e=this);var i={};i.fillers=r(e,t),i.currentData={};var a=function(a){var l=o?r(e,t):i.fillers,d=i.currentData;n.each(a,function(e,t){if(d[t]!==e){var o=l[t];o&&(o(e),d[t]=e)}})};return a.update=function(){i.fillers=r(e,t)},a};i.prototype.filler=a}),define("__model-dock/attach/model-to-dom/initialize",["require","exports","module","jquery.filler"],function(e,t,o){var i=e("jquery.filler");o.exports=function(){this.fill=i(this.$el,this.map)}}),define("__model-dock/attach/dom-to-model/initialize",["require","exports","module","lodash"],function(e,t,o){var i=e("lodash");o.exports=function(){this.$els={},i.each(this.map,i.bind(function(e,t){this.bindInput(e,t)},this))}}),define("__model-dock/attach/initialize",["require","exports","module","lodash","lowercase-backbone","./model-to-dom/initialize","./dom-to-model/initialize"],function(e,t,o){var i=(e("lodash"),e("lowercase-backbone")),n=e("./model-to-dom/initialize"),r=e("./dom-to-model/initialize");o.exports=function(){n.call(this),r.call(this);var e=this.model||i.model();this.attach(e)}}),define("__model-dock/attach/model-to-dom/update",["require","exports","module","lodash"],function(e,t,o){var i=e("lodash");o.exports=function(e){var t=this.stringifiers,o=i.mapValues(e.attributes,function(e,o){var i=t[o];return i?i.call(this,e):e});this.fill(o)}}),define("__model-dock/attach/model-to-dom/attach",["require","exports","module","lodash","./update"],function(e,t,o){var i=e("lodash"),n=e("./update");o.exports=function(){var e=i.bind(n,this);this.model.on("change",e),e(this.model)}}),define("__model-dock/attach/dom-to-model/read-dom-value",["require","exports","module","lodash","jquery"],function(e,t,o){var i=e("lodash"),n=e("jquery"),r={"default":function(e){return e.val()},DIV:function(e){return e.html()},INPUT:function(e){return"checkbox"===e.prop("type")?i.map(e.filter(":checked"),function(e){return n(e).val()}):e.val()}};o.exports=function(e){var t=e.prop("tagName"),o=r[t]||r["default"];return o(e)}}),define("__model-dock/attach/dom-to-model/update",["require","exports","module","jquery","./read-dom-value"],function(e,t,o){var i=e("jquery"),n=e("./read-dom-value");o.exports=function(e){var t=i(e.target),o=t.data("_dock_-bound-attribute");if(o){var r=t.data("_dock_-selector"),a=this.$els[r],l=n(a),d=this.parsers[o];l=d?d.call(this,l):l,this.model.set(o,l)}}}),define("__model-dock/attach/dom-to-model/attach",["require","exports","module","lodash","./update"],function(e,t,o){var i=e("lodash"),n=e("./update");o.exports=function(){this.$el.on("change",this.inputSelector,i.bind(n,this))}}),define("__model-dock/attach/dom-to-model/bind-input",["require","exports","module","lodash","jquery"],function(e,t,o){var i=e("lodash");e("jquery"),o.exports=function(e,t){if(i.isArray(e))i.each(e,i.bind(function(e){this.bindInput(e,t)},this));else{var o=this.$els[e]=this.$el.find(e);o.length>0&&o.data("_dock_-bound-attribute",t).data("_dock_-selector",e)}}}),define("__model-dock/attach/index",["require","exports","module","lodash","./model-to-dom/attach","./dom-to-model/attach","./dom-to-model/bind-input"],function(e,t){var o=(e("lodash"),e("./model-to-dom/attach")),i=e("./dom-to-model/attach");t.cache$Els=!0,t.stringifiers={},t.parsers={},t.inputSelector="input,textarea",t.bindInput=e("./dom-to-model/bind-input"),t.attach=function(e){this.detach(),this.model=e,o.call(this),i.call(this)},t.detach=function(){this.model&&(this.model.off("change",this._updateView),this.model=void 0)}}),define("__model-dock/proxy",["require","exports","module","lodash"],function(e,t){var o=e("lodash");t.proxyMethod=function(e,t){var o=this.model;return o?o[e].apply(o,t):void 0};var i=["set","get","save"];o.each(i,function(e){t[e]=function(){return this.proxyMethod(e,arguments)}})}),define("model-dock",["require","exports","module","lodash","lowercase-backbone","./__model-dock/attach/initialize","./__model-dock/attach/index","./__model-dock/proxy"],function(e,t,o){var i=e("lodash"),n=e("lowercase-backbone"),r=e("./__model-dock/attach/initialize"),a=o.exports=n.view.extend(function(e){i.extend(this,e),r.apply(this,arguments)});a.proto({model:void 0,map:{}}),a.proto(e("./__model-dock/attach/index")),a.proto(e("./__model-dock/proxy"))}),define("__collection-dock/attach/item",["require","exports","module","lodash","model-dock"],function(e,t){e("lodash");t.placeItemHtml=function(e,t){var o=this.$container.children().eq(e-1);o.length>0?o.after(t):this.$container.append(t)},t.itemHtml="<div></div>",t.itemView=e("model-dock"),t.itemViewInstance=function(e,t){return 1===arguments.length?this.itemViews[e.cid]:(2===arguments.length&&(this.itemViews[e.cid]=t),void 0)}}),define("__collection-dock/attach/event-handlers",["require","exports","module","lodash","jquery"],function(e,t){var o=e("lodash"),i=e("jquery");t.handleAdd=function(e){var t=o.isString(this.itemHtml)?this.itemHtml:this.itemHtml(e.attributes),n=i(t),r=this.collection.indexOf(e);this.placeItemHtml(r,n);var a=this.itemView({model:e,$el:n});this.itemViewInstance(e,a)},t.handleRemove=function(e){var t=this.itemViewInstance(e);t&&t.remove()},t.handleReset=function(){this.$container.html(""),this.collection.each(this.handleRemove),this.collection.each(this.handleAdd)},t.handleResort=function(e){this.handleReset(e,$container)}}),define("__collection-dock/attach/methods",["require","exports","module","lodash","./item","./event-handlers"],function(e,t){var o=e("lodash");t.resortEvent="resort",t.attach=function(e){this.detach(),this.collection=e,e.on("add",this.handleAdd).on("remove",this.handleRemove).on("reset",this.handleReset).on(this.resortEvent,this.handleResort),this.handleReset(e)},t.detach=function(){this.collection&&this.collection.off("add",void 0,this).off("remove",void 0,this).off("reset",void 0,this).off(this.resortEvent,void 0,this),this.$container.html("")},o.extend(t,e("./item")),o.extend(t,e("./event-handlers"))}),define("collection-dock",["require","exports","module","lodash","lowercase-backbone","./__collection-dock/attach/initialize","./__collection-dock/attach/methods"],function(e,t,o){var i=e("lodash"),n=e("lowercase-backbone"),r=e("./__collection-dock/attach/initialize"),a=o.exports=n.view.extend(function(e){if(i.extend(this,e),!this.$el)throw new Error('No "$el" property found on dock.');var t=this.$container;this.$container=t?i.isString(t)?this.$el.find(t):t:this.$el,r.call(this)});a.proto(e("./__collection-dock/attach/methods"))});