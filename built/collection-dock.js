//     collection-dock
//     (c) simonfan
//     collection-dock is licensed under the MIT terms.

define("__collection-dock/attach",["require","exports","module","lodash"],function(e,i){e("lodash");i.resortEvent="resort",i.attach=function(e){this.detach(),this.collection=e,e.on("add",this.handleAdd).on("remove",this.handleRemove).on("reset",this.handleReset).on(this.resortEvent,this.handleResort),this.handleReset(e)},i.detach=function(){this.collection&&this.collection.off("add",void 0,this).off("remove",void 0,this).off("reset",void 0,this).off(this.resortEvent,void 0,this),this.$container.html("")}}),define("__collection-dock/views-proxy",["require","exports","module","lodash"],function(e,i){var t=e("lodash");i.on=function(){var e=Array.prototype.slice.call(arguments);return t.each(this.itemViews,function(i){i.on.apply(i,e)}),this}}),define("__collection-dock/event-handlers",["require","exports","module","lodash","jquery"],function(e,i){e("lodash"),e("jquery");i.handleAdd=function(e){var i=this.buildItemView({model:e});this.storeView(e,i)},i.handleRemove=function(e){var i=this.getView(e);i&&i.remove()},i.handleReset=function(){this.$container.html(""),this.collection.each(this.handleRemove),this.collection.each(this.handleAdd)},i.handleResort=function(e){this.handleReset(e,this.$container)}}),define("__collection-dock/item/view",["require","exports","module","jquery","lowercase-backbone"],function(e,i,t){var o=e("jquery"),n=e("lowercase-backbone");t.exports=n.view.extend({initialize:function(){n.view.prototype.initialize.apply(this,arguments),this.initializeItemView.apply(this,arguments),this.render()},initializeItemView:function(e){this.collectionView=e.collectionView},html:"<div></div>",render:function(){var e=this.collectionView.collection.indexOf(this.model);this.$el=o(this.html);var i=this.collectionView.getViewAt(e-1);i?this.$el.insertAfter(i.$el):this.$el.appendTo(this.collectionView.$container)},remove:function(){this.collectionView.removeView(this.model.cid),n.view.prototype.remove.apply(this,arguments)}})}),define("__collection-dock/item/methods",["require","exports","module","lodash","./view"],function(e,i){var t=e("lodash");i.buildItemView=function(e){return e.collectionView=this,this.itemView(e)},i.itemView=e("./view"),i.getViewAt=function(e){if(e>=0){var i=this.collection.at(e);return this.getView(i.cid)}},i.storeView=function(e,i){return e=t.isObject(e)?e.cid:e,this.itemViews[e]=i,this},i.getView=function(e){return e=t.isObject(e)?e.cid:e,this.itemViews[e]},i.removeView=function(e){return e=t.isObject(e)?e.cid:e,delete this.itemViews[e],this}}),define("collection-dock",["require","exports","module","lodash","lowercase-backbone","./__collection-dock/attach","./__collection-dock/views-proxy","./__collection-dock/event-handlers","./__collection-dock/item/methods"],function(e,i,t){var o=e("lodash"),n=e("lowercase-backbone"),l=t.exports=n.view.extend({initialize:function(){n.view.prototype.initialize.apply(this,arguments),this.initializeCollectionDock.apply(this,arguments)},initializeCollectionDock:function(e){if(this.collection=e.collection||this.collection,!this.$el)throw new Error('No "$el" property found on dock.');var i=this.$container;this.$container=i?o.isString(i)?this.$el.find(i):i:this.$el,o.bindAll(this,"handleAdd","handleRemove","handleReset","handleResort"),this.itemViews={}}});l.proto(e("./__collection-dock/attach")),l.proto(e("./__collection-dock/views-proxy")),l.proto(e("./__collection-dock/event-handlers")),l.proto(e("./__collection-dock/item/methods"))});