//     collection-dock
//     (c) simonfan
//     collection-dock is licensed under the MIT terms.

define("__collection-dock/attach/initialize",["require","exports","module","lodash"],function(e,t,n){var o=e("lodash");n.exports=function(){o.bindAll(this,"qExec","qExecSequence")}}),define("__collection-dock/attach/handle-add/index",["require","exports","module","lodash","q","jquery"],function(e,t,n){var o=(e("lodash"),e("q")),i=e("jquery");n.exports=function(e){var t=i(this.itemPlaceholder(e)).attr(this.elementTypeAttribute,"placeholder");this.place(e,t);var n=this;o.when(this.itemData(e)).then(this.itemTemplate).done(function(o){var r=i(o).attr(n.elementTypeAttribute,"item");n.qExecSequence(["beforeAdd","add","afterAdd"],[e,r,t])})}}),define("__collection-dock/attach/handle-remove/index",["require","exports","module"],function(e,t,n){n.exports=function(e){var t=this.retrieve$El(e);this.qExecSequence(["beforeRemove","remove","afterRemove"],[e,t])}}),define("__collection-dock/attach/handle-reset/index",["require","exports","module"],function(e,t,n){n.exports=function(e){this.qExecSequence(["beforeReset","reset","afterReset"],[e,this.$el])}}),define("__collection-dock/attach/handle-resort/index",["require","exports","module"],function(e,t,n){n.exports=function(e){this.qExecSequence(["beforeSort","sort","afterSort"],[e,this.$el])}}),define("__collection-dock/attach/item",["require","exports","module","lodash"],function(e,t){var n=e("lodash");t.itemPlaceholder=function(){return"<div></div>"},t.itemData=function(e){return e.attributes},t.itemTemplate=function(){return"<div></div>"},t.itemSelector=function(e){return"["+this.elementTypeAttribute+'="item"]:eq('+this.collection.indexOf(e)+")"},t.elementTypeAttribute="data-__collection-dock__-type",t.retrieve$El=function(e){var t;return t=n.isArray(e)?n.map(e,n.bind(function(e){return this.itemSelector(e)},this)).join(","):this.itemSelector(e),this.$el.find(t)}}),define("__collection-dock/attach/exec",["require","exports","module","lodash","q"],function(e,t){var n=e("lodash"),o=e("q");t.qExec=function(e,t){var i=this[e],r=n.isFunction(i)?i.apply(this,t):!0;return o(r)},t.qExecSequence=function(e,t){return e=n.map(e,n.bind(function(e){return n.partial(this.qExec,e,t)},this)),n.reduce(e,function(e,t){return e.then(t)},o(!0))}}),define("__collection-dock/attach/handle-add/actions",["require","exports","module","lodash","jquery"],function(e,t){e("lodash"),e("jquery");t.place=function(e,t){var n=this.collection.indexOf(e),o=this.$el.children().eq(n-1);o.length>0?o.after(t):this.$el.append(t)},t.beforeAdd=function(e,t,n){return t.css("opacity",0),n.css({opacity:0})},t.add=function(e,t,n){n.replaceWith(t)},t.afterAdd=function(e,t){return t.animate({opacity:1})}}),define("__collection-dock/attach/handle-remove/actions",["require","exports","module","lodash"],function(e,t){e("lodash");t.beforeRemove=function(e,t){return t.animate({opacity:0})},t.remove=function(e,t){t.remove()},t.afterRemove=function(){}}),define("__collection-dock/attach/handle-reset/actions",["require","exports","module","lodash","../handle-add/index"],function(e,t){var n=e("lodash"),o=e("../handle-add/index");t.beforeReset=function(){},t.reset=function(e,t){t.html(""),e.each(n.bind(o,this))},t.afterReset=function(){}}),define("__collection-dock/attach/handle-resort/actions",["require","exports","module","lodash","../handle-reset/index"],function(e,t){var n=(e("lodash"),e("../handle-reset/index"));t.beforeSort=function(){},t.sort=function(e,t){n.call(this,e,t)},t.afterSort=function(){}}),define("__collection-dock/attach/index",["require","exports","module","lodash","./handle-add/index","./handle-remove/index","./handle-reset/index","./handle-resort/index","./item","./exec","./handle-add/actions","./handle-remove/actions","./handle-reset/actions","./handle-resort/actions"],function(e,t){var n=e("lodash"),o=e("./handle-add/index"),i=e("./handle-remove/index"),r=e("./handle-reset/index"),c=e("./handle-resort/index");t.resortEvent="resort",t.attach=function(e){this.detach(),this.collection=e,e.on("add",n.bind(o,this)).on("remove",n.bind(i,this)).on("reset",n.bind(r,this)).on(this.resortEvent,n.bind(c)),r.call(this,e)},t.detach=function(){this.collection&&this.collection.off("add",void 0,this).off("remove",void 0,this).off("reset",void 0,this).off(this.resortEvent,void 0,this),this.$el.html("")},n.extend(t,e("./item")),n.extend(t,e("./exec")),n.extend(t,e("./handle-add/actions")),n.extend(t,e("./handle-remove/actions")),n.extend(t,e("./handle-reset/actions")),n.extend(t,e("./handle-resort/actions"))}),define("collection-dock",["require","exports","module","lodash","lowercase-backbone","./__collection-dock/attach/initialize","./__collection-dock/attach/index"],function(e,t,n){var o=e("lodash"),i=e("lowercase-backbone"),r=e("./__collection-dock/attach/initialize"),c=n.exports=i.view.extend(function(e){if(o.extend(this,e),!this.$el)throw new Error('No "$el" property found on dock.');r.call(this)});c.proto(e("./__collection-dock/attach/index"))});